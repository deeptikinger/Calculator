(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),l=n.n(c),o=n(1),i=r.a.createContext({isAuth:!1,login:function(){}}),u=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],l=n[1];return r.a.createElement(i.Provider,{value:{login:function(){l(!0)},isAuth:c}},e.children)},m=(n(13),n(14),function(e){return r.a.createElement("div",{className:"card"},e.children)}),s=(n(15),function(e){var t=Object(a.useContext)(i);return r.a.createElement("div",{className:"auth"},r.a.createElement(m,null,r.a.createElement("h2",null,"You are not authenticated!"),r.a.createElement("p",null,"Please log in to continue."),r.a.createElement("button",{onClick:function(){t.login()}},"Log In")))}),E=n(2),d=n(7),f=(n(16),r.a.memo(function(e){return r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,e.ingredients.map(function(t){return r.a.createElement("li",{key:t.id,onClick:e.onRemoveItem.bind(void 0,t.id)},r.a.createElement("span",null,t.title),r.a.createElement("span",null,t.amount,"x"))})))})),b=(n(17),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),h=(n(18),r.a.memo(function(e){var t=Object(a.useState)(""),n=Object(o.a)(t,2),c=n[0],l=n[1],i=Object(a.useState)(""),u=Object(o.a)(i,2),s=u[0],E=u[1];return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement(m,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onAdd({title:c,amount:s})}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:c,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:s,onChange:function(e){E(e.target.value)}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),e.loading?r.a.createElement(b,null):null))))})),p=(n(19),r.a.memo(function(e){var t=e.onLoad,n=Object(a.useState)(""),c=Object(o.a)(n,2),l=c[0],i=c[1],u=Object(a.useRef)();return Object(a.useEffect)(function(){var e=setTimeout(function(){if(l===u.current.value){var e=0===l.length?" ":'?orderBy="title"&equalTo="'.concat(l,'"');fetch("https://react-hooks-c303a.firebaseio.com/ingredients.json"+e).then(function(e){return e.json()}).then(function(e){var n=[];for(var a in e)n.push({id:a,title:e[a].title,amount:e[a].amount});t(n)})}},500);return function(){clearTimeout(e)}},[l,t,u]),r.a.createElement("section",{className:"search"},r.a.createElement(m,null,r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),r.a.createElement("input",{ref:u,type:"text",value:l,onChange:function(e){return i(e.target.value)}}))))})),v=(n(20),r.a.memo(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:e.onClose}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,e.children),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.onClose},"Okay"))))})),g=function(e,t){switch(t.type){case"SET":return t.ings;case"DELETE":return e.filter(function(e){return e.id!==t.id});case"ADD":return[].concat(Object(d.a)(e),[t.ing]);default:throw new Error("Never reached there")}},O=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(E.a)(Object(E.a)({},e),{},{loading:!1});case"ERROR":return{loading:!1,error:t.error};case"CLEAR":return Object(E.a)(Object(E.a)({},e),{},{error:null});default:throw new Error("Never reached")}};var j=function(){var e=Object(a.useReducer)(g,[]),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useReducer)(O,{loading:!1,error:null}),i=Object(o.a)(l,2),u=i[0],m=i[1],s=Object(a.useCallback)(function(e){m({type:"SEND"}),fetch("https://react-hooks-c303a.firebaseio.com/ingredients.json",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(e){return m({type:"RESPONSE"}),e.json()}).then(function(t){c({type:"ADD",ing:Object(E.a)({id:t.name},e)})})},[]),d=Object(a.useCallback)(function(e){m({type:"SEND"}),fetch("https://react-hooks-c303a.firebaseio.com/ingredients/".concat(e,".json"),{method:"DELETE"}).then(function(t){m({type:"RESPONSE"}),c({type:"DELETE",id:e})}).catch(function(e){m({type:"ERROR",error:"Something Went Wrong"})})},[]),b=Object(a.useCallback)(function(e){c({type:"SET",ings:e})},[]);return r.a.createElement("div",{className:"App"},u.error&&r.a.createElement(v,{onClose:function(){m({type:"CLEAR"})}},u.error),r.a.createElement(h,{onAdd:s,loading:u.loading}),r.a.createElement("section",null,r.a.createElement(p,{onLoad:b}),r.a.createElement(f,{ingredients:n,onRemoveItem:d})))},y=function(e){var t=Object(a.useContext)(i),n=r.a.createElement(s,null);return t.isAuth&&(n=r.a.createElement(j,null)),n};l.a.render(r.a.createElement(u,null,r.a.createElement(y,null)),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.62c8bd34.chunk.js.map